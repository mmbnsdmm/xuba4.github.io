(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-center-UpdateAvatar"],{"0300":function(t,e,i){var a=i("c6f2");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("67f824ee",a,!0,{sourceMap:!1,shadowMode:!1})},"059a":function(t,e,i){"use strict";var a=i("edb2"),o=i.n(a);o.a},"0ee2":function(t,e,i){"use strict";i.r(e);var a=i("d205"),o=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=o.a},"12cd":function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}));var a={uGap:i("3ad8").default},o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user-center-update-avatar"},[i("u-gap"),i("v-uni-view",{staticClass:"container"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-xs-12"},[i("div",{staticClass:"preview"},[i("img",{staticClass:"image center-block",attrs:{src:t.path,alt:"",width:"200",height:"200"}})]),i("kps-image-cutter",{attrs:{url:t.url,fixed:!0,blob:!1,width:200,height:200},on:{ok:function(e){arguments[0]=e=t.$handleEvent(e),t.onok.apply(void 0,arguments)},cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.oncancle.apply(void 0,arguments)}}}),i("u-gap"),i("v-uni-button",{staticClass:"btn btn-info btn-block",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseImage()}}},[t._v("选择图片")]),i("v-uni-button",{staticClass:"btn btn-warning btn-block",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.resetIt()}}},[t._v("重置")]),i("v-uni-button",{staticClass:"btn btn-danger btn-block btn-lg",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectIt()}}},[t._v("确定修改")])],1)])])],1)},n=[]},2348:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"u-gap",style:[t.gapStyle]})},n=[]},"300f":function(t,e,i){"use strict";var a=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(i("6271")),n=i("b970"),h={name:"UserCenterUpdateAvatar",components:{kpsImageCutter:o.default},data:function(){return{url:"",path:""}},onLoad:function(){var t=this;t.path=t.$store.getters.userInfo.avatar,this.url=""},methods:{chooseImage:function(){var t=this;uni.chooseImage({success:function(e){t.url=e.tempFilePaths[0]}})},onok:function(t){var e=this;e.path=t.path,e.url=""},oncancle:function(){var t=this;t.url=""},resetIt:function(){var t=this;t.url="",t.path=t.path=t.$store.getters.userInfo.avatar},selectIt:function(){var t=this;t.path!==t.$store.getters.userInfo.avatar?t.$auth.post("/user/file/upload",{base64:t.path},!0,(function(e){var i=e.urls[0];t.$auth.post("/user/center/update-avatar",{newAvatarUrl:i},!0,(function(e){(0,n.Toast)("修改头像成功"),t.$auth.updateUserInfo(),t.$router.push("/pages/user/center/Index")}),(function(t){(0,n.Toast)(t)}))}),(function(t){(0,n.Toast)(t)})):(0,n.Toast)("请选取图片后后上传")}}};e.default=h},"3ad8":function(t,e,i){"use strict";i.r(e);var a=i("2348"),o=i("0ee2");for(var n in o)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(n);i("718c");var h,s=i("f0c5"),r=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,"71495536",null,!1,a["a"],h);e["default"]=r.exports},"5a58":function(t,e,i){"use strict";i.r(e);var a=i("12cd"),o=i("ca98");for(var n in o)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(n);i("65c76");var h,s=i("f0c5"),r=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,"1e34a038",null,!1,a["a"],h);e["default"]=r.exports},6271:function(t,e,i){"use strict";i.r(e);var a=i("6edf"),o=i("f10b");for(var n in o)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(n);i("059a");var h,s=i("f0c5"),r=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,"2ca43e78",null,!1,a["a"],h);e["default"]=r.exports},"65c76":function(t,e,i){"use strict";var a=i("0300"),o=i.n(a);o.a},"6edf":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.url,expression:"url"}],staticClass:"ksp-image-cutter"},[i("v-uni-canvas",{style:{width:t.target.width+"px",height:t.target.height+"px"},attrs:{"canvas-id":"target"}}),i("v-uni-view",{staticClass:"body"},[t.url?i("v-uni-image",{staticClass:"image",style:{left:t.image.left+"px",top:t.image.top+"px",width:t.image.width+"px",height:t.image.height+"px"},attrs:{src:t.url},on:{load:function(e){arguments[0]=e=t.$handleEvent(e),t.imageLoad.apply(void 0,arguments)}}}):t._e(),t.mask.show?i("v-uni-view",{staticClass:"mask"}):t._e(),i("v-uni-view",{staticClass:"plank",on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e,"plank")},touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.touchMove.apply(void 0,arguments)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.touchEnd.apply(void 0,arguments)},touchcancel:function(e){arguments[0]=e=t.$handleEvent(e),t.touchCancel.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"frame",style:{left:t.frame.left+"px",top:t.frame.top+"px",width:t.frame.width+"px",height:t.frame.height+"px"},on:{touchstart:[function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e,"frame")},function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchHandle.apply(void 0,arguments)}]}},[t.mask.show?i("v-uni-canvas",{staticClass:"canvas",style:{width:t.frame.width+"px",height:t.frame.height+"px"},attrs:{"canvas-id":"canvas"}}):t._e(),i("v-uni-view",{staticClass:"rect"}),i("v-uni-view",{staticClass:"line-one"}),i("v-uni-view",{staticClass:"line-two"}),i("v-uni-view",{staticClass:"line-three"}),i("v-uni-view",{staticClass:"line-four"}),i("v-uni-view",{staticClass:"frame-left",on:{touchstart:[function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e,"left")},function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchHandle.apply(void 0,arguments)}]}}),i("v-uni-view",{staticClass:"frame-right",on:{touchstart:[function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e,"right")},function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchHandle.apply(void 0,arguments)}]}}),i("v-uni-view",{staticClass:"frame-top",on:{touchstart:[function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e,"top")},function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchHandle.apply(void 0,arguments)}]}}),i("v-uni-view",{staticClass:"frame-bottom",on:{touchstart:[function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e,"bottom")},function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchHandle.apply(void 0,arguments)}]}}),i("v-uni-view",{staticClass:"frame-left-top",on:{touchstart:[function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e,"left-top")},function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchHandle.apply(void 0,arguments)}]}}),i("v-uni-view",{staticClass:"frame-left-bottom",on:{touchstart:[function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e,"left-bottom")},function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchHandle.apply(void 0,arguments)}]}}),i("v-uni-view",{staticClass:"frame-right-top",on:{touchstart:[function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e,"right-top")},function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchHandle.apply(void 0,arguments)}]}}),i("v-uni-view",{staticClass:"frame-right-bottom",on:{touchstart:[function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e,"right-bottom")},function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchHandle.apply(void 0,arguments)}]}})],1)],1)],1),i("v-uni-view",{staticClass:"toolbar"},[i("v-uni-button",{staticClass:"btn-cancel",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.oncancle.apply(void 0,arguments)}}},[t._v("返回")]),i("v-uni-button",{staticClass:"btn-ok",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onok.apply(void 0,arguments)}}},[t._v("确定")])],1)],1)},n=[]},"718c":function(t,e,i){"use strict";var a=i("bfde"),o=i.n(a);o.a},"9e54":function(t,e,i){var a=i("4bad");e=a(!1),e.push([t.i,".ksp-image-cutter[data-v-2ca43e78]{position:absolute;width:100%;height:100%;top:0;bottom:0;z-index:1000}.toolbar[data-v-2ca43e78]{position:absolute;width:100%;height:%?100?%;left:%?0?%;bottom:%?0?%;box-sizing:border-box;border-bottom:1px solid silver;background:#f8f8f8}.btn-cancel[data-v-2ca43e78]{position:absolute;left:%?100?%;top:%?12?%;font-size:%?30?%;line-height:%?30?%;padding:%?20?%;color:#333}.btn-ok[data-v-2ca43e78]{position:absolute;right:%?100?%;top:%?12?%;font-size:%?30?%;line-height:%?30?%;padding:%?20?%;color:#333}.body[data-v-2ca43e78]{position:absolute;left:%?0?%;right:%?0?%;top:%?0?%;bottom:%?100?%;background:#000;overflow:hidden}.mask[data-v-2ca43e78]{position:absolute;left:%?0?%;right:%?0?%;top:%?0?%;bottom:%?0?%;background:#000;opacity:.4}.plank[data-v-2ca43e78]{position:absolute;left:%?0?%;right:%?0?%;top:%?0?%;bottom:%?0?%}.image[data-v-2ca43e78]{position:absolute}.frame[data-v-2ca43e78]{position:absolute}.canvas[data-v-2ca43e78]{position:absolute;display:block;left:0;top:0}.rect[data-v-2ca43e78]{position:absolute;left:-2px;top:-2px;width:100%;height:100%;border:2px solid #fff}.line-one[data-v-2ca43e78]{position:absolute;width:100%;height:1px;background:#fff;left:0;top:33.3%}.line-two[data-v-2ca43e78]{position:absolute;width:100%;height:1px;background:#fff;left:0;top:66.7%}.line-three[data-v-2ca43e78]{position:absolute;width:1px;height:100%;background:#fff;top:0;left:33.3%}.line-four[data-v-2ca43e78]{position:absolute;width:1px;height:100%;background:#fff;top:0;left:66.7%}.frame-left[data-v-2ca43e78]{position:absolute;height:100%;width:8px;left:-4px;top:0}.frame-right[data-v-2ca43e78]{position:absolute;height:100%;width:8px;right:-4px;top:0}.frame-top[data-v-2ca43e78]{position:absolute;width:100%;height:8px;top:-4px;left:0}.frame-bottom[data-v-2ca43e78]{position:absolute;width:100%;height:8px;bottom:-4px;left:0}.frame-left-top[data-v-2ca43e78]{position:absolute;width:20px;height:20px;left:-6px;top:-6px;border-left:4px solid red;border-top:4px solid red}.frame-left-bottom[data-v-2ca43e78]{position:absolute;width:20px;height:20px;left:-6px;bottom:-6px;border-left:4px solid red;border-bottom:4px solid red}.frame-right-top[data-v-2ca43e78]{position:absolute;width:20px;height:20px;right:-6px;top:-6px;border-right:4px solid red;border-top:4px solid red}.frame-right-bottom[data-v-2ca43e78]{position:absolute;width:20px;height:20px;right:-6px;bottom:-6px;border-right:4px solid red;border-bottom:4px solid red}",""]),t.exports=e},bfde:function(t,e,i){var a=i("c20a");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("d5ff07fe",a,!0,{sourceMap:!1,shadowMode:!1})},c20a:function(t,e,i){var a=i("4bad");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */',""]),t.exports=e},c6f2:function(t,e,i){var a=i("4bad");e=a(!1),e.push([t.i,".image[data-v-1e34a038]{width:200px;height:200px;margin:0 auto}",""]),t.exports=e},ca98:function(t,e,i){"use strict";i.r(e);var a=i("300f"),o=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=o.a},d205:function(t,e,i){"use strict";i("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"u-gap",props:{bgColor:{type:String,default:"transparent "},height:{type:[String,Number],default:30},marginTop:{type:[String,Number],default:0},marginBottom:{type:[String,Number],default:0}},computed:{gapStyle:function(){return{backgroundColor:this.bgColor,height:this.height+"rpx",marginTop:this.marginTop+"rpx",marginBottom:this.marginBottom+"rpx"}}}};e.default=a},ed01:function(t,e,i){"use strict";i("ace4"),i("a9e3"),i("d3b7"),i("ac1f"),i("3ca3"),i("466d"),i("1276"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("ddb0"),i("2b3d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={props:{url:{type:String,default:""},fixed:{type:Boolean,default:!1},width:{type:Number,default:200},height:{type:Number,default:200},maxWidth:{type:Number,default:1024},maxHeight:{type:Number,default:1024},blob:{type:Boolean,default:!0}},data:function(){return{mask:{show:!1},frame:{left:50,top:50,width:this.width,height:this.height},image:{left:20,top:20,width:300,height:400},real:{width:100,height:100},target:{width:this.width,height:this.height},touches:[],type:"",start:{frame:{left:0,top:0,width:0,height:0},image:{left:0,top:0,width:0,height:0}},timeoutId:-1,context:null}},mounted:function(){this.$el.addEventListener("touchmove",(function(t){t.preventDefault()})),this.context=uni.createCanvasContext("canvas",this),this.targetContext=uni.createCanvasContext("target",this)},methods:{imageLoad:function(t){var e=this;this.mask.show=!0,this.real.width=t.detail.width,this.real.height=t.detail.height,this.image.width=t.detail.width,this.image.height=t.detail.height,this.frame.width=this.width,this.frame.height=this.height,this.fixed||(this.frame.width=this.image.width,this.frame.height=this.image.height);var i=uni.createSelectorQuery().in(this);i.select(".body").boundingClientRect((function(t){var i=t.width,a=t.height,o=e.frame.width,n=e.frame.height,h=.8*i,s=.8*a,r=h/o,f=s/n,c=r;r<f&&(c=f),h=o*c,s=n*c;var l=(i-h)/2,u=(a-s)/2;e.frame.width=h,e.frame.height=s,e.frame.left=l,e.frame.top=u;var d=e.image.width,p=e.image.height;r=h/d,f=s/p,c=r,r<f&&(c=f),e.image.width=d*c,e.image.height=p*c,e.image.left=(i-e.image.width)/2,e.image.top=(a-e.image.height)/2,setTimeout((function(){e.trimImage()}),100)})).exec()},touchHandle:function(){},touchStart:function(t,e){this.stopTime(),this.mask.show=!1,0==this.touches.length&&(this.type=e,this.start.frame.left=this.frame.left,this.start.frame.top=this.frame.top,this.start.frame.width=this.frame.width,this.start.frame.height=this.frame.height,this.start.image.left=this.image.left,this.start.image.top=this.image.top,this.start.image.width=this.image.width,this.start.image.height=this.image.height);for(var i=t.changedTouches,a=0;a<i.length;a++){var o=i[a];this.touches.push(o)}},touchMove:function(t){this.stopTime(),t.preventDefault();var e=t.touches;if(1==this.touches.length)"plank"==this.type||"frame"==this.type||this.fixed?this.moveImage(this.touches[0],e[0]):this.scaleFrame(this.touches[0],e[0],this.type);else if(2==this.touches.length&&2==e.length){var i=this.touches[0],a=this.touches[1],o=e[0],n=e[1];if(i.identifier!=o.identifier){var h=o;o=n,n=h}this.scaleImage(i,a,o,n)}},touchEnd:function(t){this.type="",this.touches=[],this.startTime()},touchCancel:function(t){this.type="",this.touches=[],this.startTime()},startTime:function(){var t=this;this.stopTime(),this.timeoutId=setTimeout((function(){t.trimImage()}),800)},stopTime:function(){this.timeoutId>=0&&(clearTimeout(this.timeoutId),this.timeoutId=-1)},trimImage:function(){var t=this;this.mask.show=!0;var e=uni.createSelectorQuery().in(this);e.select(".body").boundingClientRect((function(e){var i=e.width,a=e.height,o=t.frame.width,n=t.frame.height,h=.8*i,s=.8*a,r=h/o,f=s/n,c=r;r>f&&(c=f),h=o*c,s=n*c;var l=(i-h)/2,u=(a-s)/2,d=l-t.frame.left+(t.frame.left-t.image.left)*(1-c),p=u-t.frame.top+(t.frame.top-t.image.top)*(1-c);t.frame.width=h,t.frame.height=s,t.frame.left=l,t.frame.top=u,t.image.width*=c,t.image.height*=c,t.image.left+=d,t.image.top+=p})).exec(),setTimeout((function(){var e=t.image.width/t.real.width,i=(t.frame.left-t.image.left)/e,a=(t.frame.top-t.image.top)/e,o=t.frame.width/e,n=t.frame.height/e;t.context.drawImage(t.url,i,a,o,n,0,0,t.frame.width,t.frame.height),t.context.draw(!1)}),100)},moveImage:function(t,e){var i=e.clientX-t.clientX,a=e.clientY-t.clientY;this.image.left=this.start.image.left+i,this.image.top=this.start.image.top+a,this.image.left>this.frame.left&&(this.image.left=this.frame.left),this.image.top>this.frame.top&&(this.image.top=this.frame.top),this.image.left+this.image.width<this.frame.left+this.frame.width&&(this.image.left=this.frame.left+this.frame.width-this.image.width),this.image.top+this.image.height<this.frame.top+this.frame.height&&(this.image.top=this.frame.top+this.frame.height-this.image.height)},scaleImage:function(t,e,i,a){var o=t.clientX,n=t.clientY,h=e.clientX,s=e.clientY,r=i.clientX,f=i.clientY,c=a.clientX,l=a.clientY,u=Math.sqrt((o-h)*(o-h)+(n-s)*(n-s)),d=Math.sqrt((r-c)*(r-c)+(f-l)*(f-l)),p=(o+h)/2,m=(n+s)/2,g=(r+c)/2,v=(f+l)/2,b=g-p,w=v-m,x=d/u;this.start.image.width*x<this.frame.width&&(x=this.frame.width/this.start.image.width),this.start.image.height*x<this.frame.height&&(x=this.frame.height/this.start.image.height),this.start.image.width*x<this.frame.width&&(x=this.frame.width/this.start.image.width),this.image.left=this.start.image.left+b-(p-this.start.image.left)*(x-1),this.image.top=this.start.image.top+w-(m-this.start.image.top)*(x-1),this.image.width=this.start.image.width*x,this.image.height=this.start.image.height*x,this.image.left>this.frame.left&&(this.image.left=this.frame.left),this.image.top>this.frame.top&&(this.image.top=this.frame.top),this.image.left+this.image.width<this.frame.left+this.frame.width&&(this.image.left=this.frame.left+this.frame.width-this.image.width),this.image.top+this.image.height<this.frame.top+this.frame.height&&(this.image.top=this.frame.top+this.frame.height-this.image.height)},scaleFrame:function(t,e,i){var a=e.clientX-t.clientX,o=e.clientY-t.clientY,n=this.start.frame.left,h=this.start.frame.top,s=this.start.frame.left+this.start.frame.width,r=this.start.frame.top+this.start.frame.height;"left"==i?n+=a:"right"==i?s+=a:"top"==i?h+=o:"bottom"==i?r+=o:"left-top"==i?(n+=a,h+=o):"left-bottom"==i?(n+=a,r+=o):"right-top"==i?(s+=a,h+=o):"right-bottom"==i&&(s+=a,r+=o),n<this.image.left&&(n=this.image.left),h<this.image.top&&(h=this.image.top),s>this.image.left+this.image.width&&(s=this.image.left+this.image.width),r>this.image.top+this.image.height&&(r=this.image.top+this.image.height),this.frame.left=n,this.frame.top=h,this.frame.width=s-n,this.frame.height=r-h},parseBlob:function(t){for(var e=t.split(","),i=e[0].match(/:(.*?);/)[1],a=atob(e[1]),o=a.length,n=new Uint8Array(o),h=0;h<o;h++)n[h]=a.charCodeAt(h);var s=URL||webkitURL;return s.createObjectURL(new Blob([n],{type:i}))},onok:function(){var t=this,e=this.image.width/this.real.width,i=(this.frame.left-this.image.left)/e,a=(this.frame.top-this.image.top)/e,o=this.frame.width/e,n=this.frame.height/e,h=o,s=n;if(this.fixed)h=this.width/2,s=this.height/2;else{if(h>this.maxWidth/2){var r=this.maxWidth/2/h;h*=r,s*=r}if(s>this.maxHeight/2){r=this.maxHeight/2/s;s*=r,h*=r}}this.target.width=h,this.target.height=s,uni.showLoading({title:"正在裁剪"}),setTimeout((function(){t.targetContext.drawImage(t.url,i,a,o,n,0,0,h,s),t.targetContext.draw(!1,(function(){uni.canvasToTempFilePath({canvasId:"target",success:function(e){var i=e.tempFilePath;t.blob&&(i=t.parseBlob(i)),t.$emit("ok",{path:i})},fail:function(t){console.log(t)},complete:function(){uni.hideLoading()}},t)}))}),100)},oncancle:function(){this.$emit("cancel")}}};e.default=a},edb2:function(t,e,i){var a=i("9e54");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("120ea8f3",a,!0,{sourceMap:!1,shadowMode:!1})},f10b:function(t,e,i){"use strict";i.r(e);var a=i("ed01"),o=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=o.a}}]);